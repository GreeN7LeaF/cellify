@model Cellphone.Models.Banner

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/Admin_Layout.cshtml";
}

<div class="breadcumb d-flex flex-row mb-3">
    @Html.ActionLink("Sản phẩm", "Index", null, new { @class = "bc-prev nav-link" })
    <a href="#" class="nav-link">Chỉnh sửa sản phẩm</a>
</div>
<h5 class="title">Chỉnh sửa thông tin sản phẩm</h5>
<p>Chỉnh sửa các mục cho phép</p>
<div class="row">
    <div class="col-8">
        <div class="create-form">
            @using (Html.BeginForm("Edit", "Banner", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                @Html.AntiForgeryToken()
                <input type="hidden" name="HinhAnhSrc" value="@Model.HinhAnh"/>
                <!-- 2 column grid layout with text inputs for the first and last names -->
                <div class="row mb-4">
                    <div class="col">
                        <div class="form-outline">
                            @Html.EditorFor(model => model.Ten, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Ten, "", new { @class = "text-danger" })
                            @Html.LabelFor(model => model.Ten, htmlAttributes: new { @class = "form-label" })
                        </div>
                    </div>
                    <div class="col">
                        <div class="file-upload">
                            <div class="file-select">
                                <div class="file-select-button" id="fileName">
                                    Choose Image
                                </div>
                                <div class="file-select-name" id="noFile">
                                    No file chosen...
                                </div>
                                <input type="file" id="HinhAnh" name="HinhAnh" data-default-value="@Model.HinhAnh" onchange="previewImage(event)" />
                            </div>
                        </div>
                    </div>
                    
                </div>

                <div class="form-outline mb-4">
                    <textarea class="form-control"
                              id="NoiDung"
                              name="NoiDung"
                              rows="4">@Model.NoiDung</textarea>
                    <label class="form-label" for="NoiDung">Nội Dung</label>
                </div>

                <!-- Submit button -->
                <button type="submit"
                        class="btn btn-clr-normal btn-block mb-4">
                    Save
                </button>
            }
        </div>
    </div>
    <div class="col-3">
        <div class="form-outline mb-4">
            <div id="imagePreview" class="default-img-wrapper">
                @if (Model.HinhAnh == null)
                {
                    <img src="../../../images/default.jpg" name="HinhAnh2" alt="" />
                }
                else
                {
                    <img src="@Url.Content("~/Images/Banner/" + @Model.HinhAnh)" name="HinhAnh2" alt="" />
                }
            </div>
            <label class="form-label" for="form6Example4">Image</label>
        </div>
    </div>
    <script>
        function previewImage(event) {
            var input = event.target;
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    var img = document.createElement("img");
                    img.src = e.target.result;
                    img.width = 200; // Thay đổi kích thước hình ảnh tại đây
                    var container = document.getElementById("imagePreview");
                    container.innerHTML = "";
                    container.appendChild(img);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
        @*window.addEventListener("load", function () {
            console.log(document.getElementById("HinhAnh"));
            var input = document.getElementById("HinhAnh");
            input.value = input.getAttribute("data-default-value");
        });*@
    </script>
</div>


